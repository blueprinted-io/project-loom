{% extends "base.html" %}
{% block content %}
<h1>Database</h1>
<p class="muted">Switch between dataset profiles (each profile is a separate SQLite file). This is an MVP convenience feature.</p>

<div class="card">
  <p><b>Current:</b> {{ request.state.db_key }}</p>

  <form method="post" action="/db/switch" style="margin-top:10px">
    <label>Target profile</label>
    <select name="db_key">
      {% for p in profiles %}
        <option value="{{ p.key }}" {% if request.state.db_key==p.key %}selected{% endif %}>{{ p.label }}</option>
      {% endfor %}
    </select>

    <button class="btn" type="submit" style="margin-top:10px">Switch</button>
  </form>

  <hr style="margin: 16px 0" />

  <form method="post" action="/db/create">
    <label>Create new blank profile (admin)</label>
    <input name="db_key" placeholder="e.g. customer_a" />
    <div class="muted" style="margin-top:6px">Allowed: a-z, 0-9, _, - (must start with a letter).</div>
    <button class="btn secondary" type="submit" style="margin-top:10px">Create</button>
  </form>

  <div class="callout warn" style="margin-top: 14px">
    <b>Note</b>
    <div class="muted">This switches the active SQLite file. It does not merge or migrate content between profiles.</div>
  </div>
</div>
{% endblock %}
